# Express Middleware App

## Описание

Учебный проект на Node.js и Express.js с демонстрацией работы middleware, статических файлов, cookies, тем оформления и JWT-аутентификации.  
В проекте реализованы шаблоны на PUG и EJS, а также защищённые маршруты.

---

## Функционал

- **Статические файлы:**  
  - Сервер отдаёт favicon.ico и другие файлы из папки `src/public`.
  - Favicon отображается на всех страницах (PUG/EJS).

- **Работа с cookies:**  
  - Сохранение выбранной пользователем темы оформления (`/theme`).
  - Тема хранится в httpOnly cookie.

- **JWT авторизация:**  
  - Регистрация и вход пользователя с генерацией JWT.
  - Токен хранится в httpOnly cookie.
  - Защищённые маршруты доступны только с валидным токеном.
  - Выход пользователя с удалением токена.

- **Шаблоны:**  
  - Используются PUG и EJS с поддержкой темы и favicon.

---

## Установка и запуск

```bash
npm install
npm run dev
```

Сервер стартует на порту 3000 (или на порту из переменной окружения `PORT`).

---

## Основные маршруты

- **Favicon:**  
  - Доступен по адресу `/favicon.ico` (автоматически подключается на всех страницах).

- **Тема оформления:**  
  - `POST /theme`  
    Тело запроса: `{ "theme": "dark" }` или `{ "theme": "light" }`

- **Аутентификация:**  
  - `POST /auth/register` — регистрация пользователя  
  - `POST /auth/login` — вход пользователя  
  - `POST /auth/logout` — выход  
  - `GET /auth/profile` — защищённый маршрут (требует JWT)

- **Пользователи и статьи:**  
  - Примеры страниц с шаблонами PUG/EJS: `/users`, `/users/:id`, `/articles`, `/articles/:id`

---

## Проверка

- Используйте Postman для тестирования API.
- Откройте сайт в браузере и убедитесь, что favicon отображается на всех страницах.
- Проверьте работу смены темы и авторизации.

---

## Структура проекта

```
src/
  app.mjs
  public/
    favicon.ico
  views/
    pug/
      layout.pug
      users.pug
      userDetails.pug
    ejs/
      layout.ejs
      articles.ejs
      articleDetails.ejs
  routes/
  controllers/
  middleware/
```

---

## Требования

- Node.js 18+
- npm

---

## Автор

Студент курса Fullstack JS
